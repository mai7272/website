<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta http-equiv="Content-Language" content="ar" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <link rel="stylesheet" type="text/css" href="hanadi.css" />
  <link rel="shortcut icon" type="image/png" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAS5SURBVGhD7VhbT1xVFEYfjA8an0xM1MQ/4Ksm+sBD58acw8DA3jNcLMzItOWSthJMiwIFWrAYi1qTqrUxwXgjFkNbW6SWak1Te1GkUIECLdOBKaXlDgWsNS7XnrPPmTNwhtBxmCHmfMkXCPuctb5vr7332pwEHTp06NChQ4eO/zESKX3MIBCbUSTlRpF+YBRII/7+iUkku02iI9ViIU/yR9cnjMmOl1HwcRT/p0mksALvo6kTRjHdxF9dHzClOJ9lwtRizckO8BQUw443q6Gsci+U7NwF7s1bA39XP2cSyGlzivM5Hip+YLOKVbgjC9tcVAItrafh9u0JWFy8r3Byag6Ghkeg9+oAfPFVE7y6ZbtiBt+fYUuRh4w9AvtAIH8zMXaHC062/QwLC3+FGFBzfv4ejI6Ogc/nhxs3huHLxiawkY2yIbbcnDx07GC0pr9oFOg8E5GX/xp4vTc1xWtxfHw6YIbx4qUOyHbnS5URyD2TNf0lnmLtkZiY+yguh2ss+SvuAvD7RzUFr8QpXGqymY6OLnBu3MQrQ/w2m+1xnmptgTNXw5ImpWRAT+91TaGrodrMqbYzykFgtJKDZoFWYZ4jJoGeMVnJYZZTEHKe5hL+O9hs4azdZQkPHGzQFPggHBubUsyUVtTwqoQnGhqxCE7K5UQOg0g8LKA1NXPZyRQpR0buwMeHPgOLzRki2mxzgGDPBMvSI5uNifQCpfQRLuvBgTPyAwtUVbNPU1QkrN//kSLQ7siFPW/VQ3dPf2BsYmImUK1z53+Dsl21S0yRWxGbkXtG87HWZYIiZba7MCCsvGovCp9dNj41fVdZft29/ZCZu0UxY0yml7m01UPq4FKAy509yxJGyqt9Xmj78eyKPUi9l7zeIchyFShmNoikkEsMj8rKyoexhG6sxEV8CZuW9HKqIwdq394Pff1ezcTRJjM57L+lmOnruw5JtgxuhsxwudqwWulTeBc6L4vXojU1AxoPH9VMHm2qGyljTd27QR3hGqnBQJ/Ajd0tP/h6aRV8f/InuPJHH/za3gUNn38DjmyPEuiXC+2ayaPJubnFECOdXT3s9JI0WOnXXHoosBEdYg+wJtXU3KIZmM0Qu9nSLA/0D/g0n4k21UYYBXtWwAhO+iUuPQiLxf4MDgQug9FoetEku0GrjaRluKSKCOQalx8EbuxCNiimZQVOC62A8aLaBGO2SzqKceIbufwg0MiHbHBbSZlmsHhx6R4ZGBgEUV5aIi3m8oPA46yBDZaW79EMGC/KXV7mt83HpWWF3JBEnufyg8CK1LHBnLwizYDxIvt3QTbBmqJr01ZuhPRw6aHAa7NFdtr++xXNoLHm5ORsSDX2vXdAqQbuD8Klh4JdxHDQyx7Ky98O4xPTmsFjxdnZBRgauqlUov794CUTT6tjKPkhSbkG0IgdH/xHNhOvykxPz4MPTQwO+uDod63gyS9WVYJ2ssbNJYcHmnlDNsOY4ykKNMDq2vo1Z1XNO1BRXQc7y3ZDwbYd6o8UEgXasioTMtAMxfL5QoLEkwIZNCTTTHaZ5RJXD/axwWxNT5M+f9IjeKqdihXxRDqBPz/FvBVo4gWUE34/6NChQ4cOHTp0rFckJPwL4qQcu4ZL4ykAAAAASUVORK5CYII=" />
  <title></br>أنظمة غيمة - Cloud Systems - تصحيح إجابة مهمّة</br></title>
  <script src="https://cdn.jsdelivr.net/npm/js-cookie@2/src/js.cookie.min.js"></script>
  <script type="text/javascript" src="js/common.js"></script>
  <script
    src="https://code.jquery.com/jquery-1.8.3.min.js"
    integrity="sha256-YcbK69I5IXQftf/mYD8WY0/KmEDCv1asggHpJk1trM8="
    crossorigin="anonymous"></script>

  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-56731261-3"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-56731261-3');
  </script>
</head>
<body>
  <nav>
    <ul>
      <li>
        <a href="index.html">الرئيسيّة</a>
      </li>
      <li id="user-email"></li>
    </ul>
  </nav>
  <div class="container">
    <div class="logo">
      <a href="index.html">
        <img id="icon">
      </a>
    </div>
    <div class="breif">
      <strong>تصحيح إجابة مهمّة:</strong> <span id="paragraph"><em>لحظة من فضلك...</em></span>
    </div>
    <div class="copyrights">
      (ح) جميع الحقوق محفوظة لمؤسّسة أنظمة غيمة (Cloud Systems).
    </div>
  </div>
  <script type="text/javascript">

    // redirectToProfileIfNotLoggedIn();
    checkIfLoginOrNot();

    function checkIfLoginOrNot() {
      var accessToken = Cookies.get('accessToken');
      if (!accessToken) {
        return redirectToLogin();
      } else {
        $.ajax('https://d2hbxkrooc.execute-api.eu-west-1.amazonaws.com/dev/auth/contributors', {
          headers: {
            'Authorization': 'Bearer ' + accessToken,
          },
          success: function(data) {
            console.log('success', data);
            updateLoginBox();
          },
          error: function(data) {
            return redirectToLogin();
          }
        });
      }
    }

    function redirectToLogin() {
      Cookies.remove('accessToken');
      Cookies.remove('email');
      Cookies.set('redirectUri', window.location.href);
      window.location.href = 'profile.html';
    }

    function updateLoginBox() {
      var userEmail = document.getElementById('user-email');
      var cookiesEmail = Cookies.get('email');
      if (cookiesEmail) {
        userEmail.innerHTML = '<a href="profile.html">' + cookiesEmail + '</a>';
      }
      rate();
    }

    function rate() {

      var loadingIcon = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAATMSURBVGhD7ZqPbxRFFMeLJv47Gn/9AXdbsLtNtN05pVHaEloIKtE2hYaKXBGhbQygKGBKIi30B/SHRauAITGC/EitpSCkLf4LGtNeGwm9tuP7zr7d3l1c7vZu7/ZC7pNMuMzNvB83b+a9mVJWokSJwhGJRJ4NVVa9GNLFNk03uzRd9NC/w1ZTn7vwHcZEo9FneFpxAIM0o3oTGdkX1s1/NEPITJoaS3NCFaI8UKfw62uVYqtmmA9Tjax4o0Y2vtcs9+7/VH7ScUQ1fEYfvksdTzLmwoZZV3CHQoZ4lUJlKtGYrTs+kP3nR+Xs3J9ydXVVurGysqLGnBsYVnMSZZAzv2sV5susJq9soHBoJaVxW/nutgNy+u59NtM7mNuytz3RoTh0QJel0mcolJ4jBYO2wpq6HfLm7d/YnNy5cWtCybTl0+r0Qyer9wflhGFetpXsO9AhF2IxNsE/IPOj9sOOM9DppzMIpz5b+PGTp5+4B3IFsj//qnvdGdINGyxTcoD3hBL6xYluVpd/oMvWG9bFbjYnO8KVVa+QILWx26KH87oSqUBXW/QQO2MubzQiL7FZ3lB5whB3IAibMBZbZBWFY34hJjfXbrdWxRCTWeWZcj1Sb/0awtfTySvXb9zmVVHO1LJ5mWGVHVbGRp4ImubW/ZYjupj1tCqqduJfYfpe9snOL+7c/cNZFdRmbGZ6kIwwCSVEsVDXuMtyRjd72cwng01uV7HnBodZTPCc7R9iR8TfGYUXjjk1gRqKu2LhwcycE150EL3A5rqjLkU0WK+qKWjeSAeq5tde32w7Us/mukMx2IXBDe82s4jioWFnk3KEjuFONtcdbCYMRibPlLW1NXnl6s/y/PCY/PfRI+6Vcnl5WY5e/EF+N345aXUXF5dk3+CIHL/0E/dkBi5nliPmGTbXHfJ2FIMPdh7l6en55fpNJ35Pdp/hXikHhr51+i+SMzafHTvh9E9MTnFvenDT5HkjbK472ThyLSH7njrdw71SDg6NOf1YFZsjx085/V6qBk+OrIfWIZ6eHoTWj1euyoELo0mhFY/H5cjYuBz7/lJyaC0tqbEILczNFK+h1YnBxb3ZzQ42152n5vjF4xkGo83MPmQxweM5ISL9F2OJ0tt/wXJEN//KuAKmweqOXr99F4sJntqG99kR0cNmpiepjM/hzcovpqbvOWEVNqo1NjM9fLGaw8SWtnYWFxxN2V6sAB1xdfavgMezoLj2662E1RBvs3mZo+4leIslAXh8yMeDXDrm5xfkm1saLUd0c8LzatjgQRlPMRCETF/IvAJdTibXzcdZPwfZhAyxR/0i1IJ6oKPVaGFzciLpyfTYl1/ndWUgGzoSnPDnyRSkPmLjroL49RvIbN13cN0Jnx+xFRBIm1+9rqC9RZsQ5btf4HSCTFs+dPnuRAIbrD1jHQBoOOORsLIFc5v2fOw4ANnhStEMXZbKPIIThM70yXXlQr07oR5CcYdK1Q18hzEY65QddqMjFkUrqykMqrg0RC2ybZIx1FBu4+6AeLf/GIrP23Z+6JTiiY3CaKZcN9/JOk/4geVQtUbGnMXjWaqRro2qWGq9mBuoA/8HDNpoVD2PP1vjpkmJ7BsyVv2HAXwmZzvwHcYUnfElSjzVlJX9BxsbtsZCzOdVAAAAAElFTkSuQmCC';
      var ratedIcon = 'data:image/png;base64,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';
      var errorIcon = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAANtSURBVGhD7ZfZa9RAHMfrgQ8iCKJ4PPlfKIguaLbbJltru4ltVTwePAqiPlRtrbq1lRZUqhS1d3dba0Gw4IMiWrT3IRVEfRM8WreCB4gPPcDujvPL/pId066brLvZiPnAwJD55Zfvb2a+mSTNxsbGxsbGJom43e6lTkE85RQ8D+XGiyfhGg7/G3CctJwKf0kLIWzjBM8LGMMw6+PkPa2K+LMXqkiptzJSDC/6MczauATPZio4BKLrGv1EobbBpxQTghgMtyYOh2OxsqV27z9CZmZmsAwi9+EajMEWg1i8zXrQLXUMZ530D45gCRH6BoaVVSEQi7dZCwcvraEz/QNEFp+tQOlzgbFwIeL3rVn5q/F260BfsW0gkN9RQAITn1D2XMY/BuQYiLWc8VmDN/tvo+ToNPvblS0WcmbmbsI0qUU2uOB5BcK0Bo/G1PQ02bXvcHhVqPElSVqE6VIHJ4jHcXbJwNAzlBomFAqRG/Ut5CZt0Gfp7R9SVoUWIx7FdKmBNXjJuYsoMcLYeEAVC97Qcrq0PDxOjZ+RIa7CtOZDZ/IWCIlm8Hfvx9RCoK8FisvMzpPH6YT4MK25sAZvae1Aab8TqxCgyRcxPpeRsxHTm4Neg+spBIxfsPeQHGO68emWOqEI1BqcRU8hQE/foBq3TRAL8THJJZbBWfQWAhSVlIVjzTI+x3va4YGxTnDASCEa4zfh45IDa3Bf2/wGZzFSCNDQ3KbEJ8/4YHD6bfQaHqT3BGfPEejHQmP850kxPmvwweHoBmeZnZ0ll6qvyw36enja068Wn3DjswY/c/7PBk8EjPG/JdT4Rgyu5VFXt9yM8GFsXDU+Pa8aUcbf4eRzt9CEug3O8vnLV3WbQN8I9U2t8n10EoP0b3IDyokP1uB7DhTqMjhLMBgk1TW15GpN3Zyv31hMTk6pxqdt1Ov1LkRZxonH4InkSXfE+NSjB1GWYRbQJZ2AJGYYfD5gFYuKveFiePEN6jKGy5WzVpmNoZFRTG0+3b0D6qqkp4srUJ5+HJK0TDYaTdB57z6mNZ+OO51KIT/pAbkE5RmDLucDSJKZnU+qLl+T/x3MbOWVV4gra6dSyF2UZRyXK2899UkAE6Wu8eJbbnv+OpQVHw53wUr6xqigybrg+8fk9pgeiGVxecPGxsbGxub/Iy3tF80FK/t0+woJAAAAAElFTkSuQmCC';

      var icon = document.getElementById('icon');
      var paragraph = document.getElementById('paragraph');
      var accessToken = Cookies.get('accessToken');
      var id = getQueryString('id');
      var action = getQueryString('action');

      icon.src = loadingIcon;
      paragraph.innerHTML = 'لحظة من فضلك...';

      if (!id || !action) {
        icon.src = errorIcon;
        paragraph.innerHTML = 'الرابط غير صحيح.';
      } else {
        // Define variables to be used to send a request.
        var http = new XMLHttpRequest();
        var url = 'https://d2hbxkrooc.execute-api.eu-west-1.amazonaws.com/dev/individual-tasks/correct';

        http.onreadystatechange = function() {
          if (http.readyState == XMLHttpRequest.DONE) {
            if (http.status == 204) {
              icon.src = ratedIcon;
              paragraph.innerHTML = 'شكرًا لك. تمّ التصحيح بنجاح!';
            }

            if (http.status == 401) {
              icon.src = errorIcon;
              paragraph.innerHTML = 'لا يُمكنك الوصول إلى هذه الصفحة.';
            }
            if (http.status == 400) {
              icon.src = errorIcon;
              paragraph.innerHTML = 'الرابط غير صحيح.';
            }
            if (http.status == 409) {
              icon.src = errorIcon;
              paragraph.innerHTML = 'لا يُمكنك تصحيح المهمّة كونها قد تمّ تصحيحها.';
            }
            if (http.status == 403) {
              icon.src = errorIcon;
              paragraph.innerHTML = 'لا يُمكنك التصحيح نظرًا لأنّك لستَ مُرشِدًا.';
            }
            if (http.status == 408) {
              icon.src = errorIcon;
              paragraph.innerHTML = 'لا يُمكنك التصحيح لانتهاء المهلة.';
            }
            if (http.status == 406) {
              icon.src = errorIcon;
              paragraph.innerHTML = 'لا يُمكنك التصحيح الآن لعدم استلام الإجابة';
            }
            if (http.status == 410) {
              icon.src = errorIcon;
              paragraph.innerHTML = 'لا يُمكنك التصحيح الآن.';
            }
          }
        }

        http.open('POST', url, true);

        // Set some headers.
        http.setRequestHeader('Content-type', 'application/json');
        http.setRequestHeader('Accept', 'application/json');
        http.setRequestHeader('Authorization', 'Bearer ' + accessToken);

        // Make a new request.
        var params = JSON.stringify({
          'id': id,
          'action': action,
        });

        http.send(params);
      }
    }

  </script>
</body>
</html>